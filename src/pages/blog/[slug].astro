---
import type { GetStaticPaths } from "astro";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Main from "../../components/Main.astro";
import H1 from "../../components/H1.astro";
import TableOfContents from "../../components/TableOfContents.astro";
import Share from "../../components/Share.astro";

export const getStaticPaths = async () => {
    const posts = await getCollection("posts");

    const paths = posts.map((post) => ({
        params: { slug: post.slug },
    
        props: { post },
    }
));
    return paths;
}

type Props = {
    post: CollectionEntry<"posts">;
}

const { post } = Astro.props;
const {Content, headings} = await post.render();


---

<Layout title={post.data.title} image={post.data.image.src} description={post.data.description}>
    <Main>
        <a href="/blog" class="text-zinc-500 text-2xl mb-16 underline block"><- Back to all Blogs</a>
        <H1 text={post.data.title} /></H1>
        <div class="px-40">
            <img src={`/${post.data.image}`} alt={post.data.title}
                width={1024} height={1024 / 2}
                class="rounded-2xl shadow-2xl mb-28 object-cover" />
            <div class="relative flex gap-x-12">
                <Share post={post} />
                <div class="prose prose-zinc prose-2xl overflow-visible relative">
                    <Content />
                </div>
                <TableOfContents headings={headings} />
            </div>
        </div>
    </Main>

</Layout>